<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- saved from url=(0064)http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node11.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Equivalence predicates</title>
<meta name="description" content="Equivalence predicates">
<meta name="keywords" content="schemetutorial">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">


<meta name="Generator" content="LaTeX2HTML v99.2beta6">
<meta http-equiv="Content-Style-Type" content="text/css">

<link rel="STYLESHEET" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/schemetutorial.css">

<link rel="next" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node12.html">
<link rel="previous" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node10.html">
<link rel="up" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/schemetutorial.html">
<link rel="next" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node12.html">
</head>

<body>
<!--Navigation Panel-->
<a name="tex2html326" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node12.html">
<img width="37" height="24" align="BOTTOM" border="0" alt="next" src="./Equivalence predicates_files/next.png"></a> 
<a name="tex2html322" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/schemetutorial.html">
<img width="26" height="24" align="BOTTOM" border="0" alt="up" src="./Equivalence predicates_files/up.png"></a> 
<a name="tex2html316" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node10.html">
<img width="63" height="24" align="BOTTOM" border="0" alt="previous" src="./Equivalence predicates_files/prev.png"></a> 
<a name="tex2html324" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node1.html">
<img width="65" height="24" align="BOTTOM" border="0" alt="contents" src="./Equivalence predicates_files/contents.png"></a>  
<br>
<b> Next:</b> <a name="tex2html327" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node12.html">Input and output</a>
<b> Up:</b> <a name="tex2html323" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/schemetutorial.html">Scheme Tutorial</a>
<b> Previous:</b> <a name="tex2html317" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node10.html">Data types</a>
 &nbsp; <b>  <a name="tex2html325" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node1.html">Contents</a></b> 
<br>
<br>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<a name="CHILD_LINKS"><strong>Subsections</strong></a>

<ul>
<li><a name="tex2html328" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node11.html#SECTION001110000000000000000">=</a>
</li><li><a name="tex2html329" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node11.html#SECTION001120000000000000000">eq?</a>
</li><li><a name="tex2html330" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node11.html#SECTION001130000000000000000">eqv?</a>
</li><li><a name="tex2html331" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node11.html#SECTION001140000000000000000">equal?</a>
</li></ul>
<!--End of Table of Child-Links-->
<hr>

<h1><a name="SECTION001100000000000000000"></a>
<a name="equiv"></a>
<br>
Equivalence predicates
</h1>

<p>
There are a couple of procedures for testing equality in Scheme.

</p><p>

</p><h1><a name="SECTION001110000000000000000"></a>
<a name="equiv_"></a>
<br>
=
</h1>
<tt>=</tt> can be used to test the equality of two exact numbers, but
should not be used e.g. for testing the equality of two floating point 
numbers. For example:
<pre>&gt; (= 2 (* 1 2))
#t
&gt; (= 2 (* 2 2))
#f
</pre>

<p>
Floating point numbers should be tested for equality by determining an 
accuracy and by checking whether the two numbers are close enough to each 
other. For example, let's say that we want to define <img width="14" height="14" align="BOTTOM" border="0" src="./Equivalence predicates_files/img6.png" alt="pi"> like this:
</p><pre>&gt; (define pi (acos -1))
</pre>

<p>
Now, let's see what happens when we try to use = to compare the value 
<i>a</i> evaluates to (as printed on the screen) and the same value written
by ourselves:
</p><pre>&gt; pi
3.1415926535898
&gt; (= 3.1415926535898 pi)
#f
</pre>

<p>
Pretty spooky! A better way to test for equality would be to determine an 
accuracy of, for example, 0.001 and then to define a procedure 
<i>good-enough?</i> to check whether the two numbers are equal enough:

</p><pre>(define acc 0.001)

(define good-enough?
  (lambda (x y)
    (&lt; (abs (- x y)) acc)))

(define feq
  (lambda (x y)
    (good-enough? x y)))

&gt; (feq pi 3.1415926535898)
#t
</pre>

<p>

</p><h1><a name="SECTION001120000000000000000">
eq?</a>
</h1>

<p>
The <tt>eq?</tt> procedure is quite similar to <tt>eqv?</tt> (see below), but
is a little bit more strict. It has the following syntax:

</p><p>
</p><pre>(eq? obj1 obj2)
</pre>

<p>
The procedure <tt>eq?</tt> can be used for testing sameness of
symbols, which are identical if they are spelled exactly the same
way<a name="tex2html17" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/footnode.html#foot2008"><sup>9.1</sup></a>:
</p><pre>&gt; (eq? 'foo 'foo)
#t
&gt; (eq? 'foo 'fooo)
#f
&gt; (define foo 'foo)
&gt; (eq? foo 'foo)
#t
</pre>

<p>
In general, <tt>eq?</tt> returns <tt>#t</tt> if its arguments are
identical in every  possible way, otherwise it returns
<tt>#f</tt>. For example, if <tt>cons</tt> is  called twice with the
same arguments, it still creates two distinct pairs and  therefore
<tt>eq?</tt> would evaluate to <tt>#f</tt>:
</p><pre>&gt; (eq? (cons 'a 'b) (cons 'a 'b))
#f
&gt; (define a (cons 'a 'b))
&gt; (define b (cons 'a 'b))
&gt; (define c a)
&gt; (eq? a b)
#f
&gt; (eq? a c)
#t
</pre>

<p>
Even if <i>a</i> and <i>b</i> have the same contents, they still refer
to different pairs and are therefore considered to be non-equal. <i>c</i> on
the other hand will refer to the same pair as <i>a</i>, so <i>a</i> and
<i>c</i> can be considered equal in every respect. 

</p><p>
The behaviour of <tt>eq?</tt> on numbers and characters is implementation
dependent and it may also behave differently from <tt>eqv?</tt> on empty 
strings and vectors. However, it is usually more efficient to use <tt>eq?</tt>
than <tt>eqv?</tt>, so unless the features of <tt>eqv?</tt> are needed,
<tt>eq?</tt> should be used. 

</p><p>

</p><h1><a name="SECTION001130000000000000000">
eqv?</a>
</h1>

<p>
The <tt>eqv?</tt> procedure defines an equivalence between objects and
should return <tt>#t</tt> if the objects compared can be regarded as the same
object. <tt>eqv?</tt> has the following syntax:

</p><p>
</p><pre>(eqv? obj1 obj2)
</pre>

<p>
<tt>eqv?</tt> returns <tt>#t</tt> if obj1 and obj2 are both true or both false,
if both are symbols and spelled the same way, if both are numbers and 
numerically equal, if both are characters and are the same character 
according to <tt>char=?</tt>, if both are the empty list, if they are pairs,
lists or vectors that denote the same locations in the store or if they are
procedures whose location tags are equal. Practically, it does not differ that
much from <tt>eq?</tt>, but in cases where the behaviour of <tt>eq?</tt> is not
specified, <tt>eqv?</tt> should be used.
</p><pre>&gt; (eqv? (* 2 2) (sqrt 16))
#t
&gt; (eqv? (cons 'a 'b) (cons 'a 'b))
#f
&gt; (eqv? 'foo 'foo)
#t
&gt; (eqv? "" (substring "foobar" 0 0))
#f
</pre>

<p>

</p><h1><a name="SECTION001140000000000000000">
equal?</a>
</h1>

<p>
The <tt>equal?</tt> procedure compares the contents of pairs, vectors and
strings and applies <tt>eqv?</tt> on other objects. The syntax of 
<tt>equal?</tt> is the following:

</p><p>
</p><pre>(equal? obj1 obj2)
</pre>

<p>
Hence, <tt>equal?</tt> can be considered to be a general procedure for testing
sameness. If you don't know what type of arguments you will be testing for
equality, you should use <tt>equal?</tt>. Note though, that <tt>equal?</tt>
might not return what you would expect when dealing with inexact numbers. You
should therefore not rely on <tt>equal?</tt> being the universal procedure for
comparing just about anything. Remember that <tt>equal?</tt> uses <tt>eqv?</tt>
on objects that are not pairs, vectors and strings!
For example:
</p><pre>&gt; (equal? 3 (/ 6 2))
#t
&gt; (equal? 3 (/ 6 2.0))
#f
</pre>

<p>
The procedure <tt>equal?</tt> tests the sameness of its arguments by comparing
the contents, for example:
</p><pre>&gt; (equal? (cons 'a 'b) (cons 'a 'b))
#t
&gt; (equal? 'foo 'foo)
#t
&gt; (equal? "" (substring "foobar" 0 0))
#t
</pre>

<p>
Note that <tt>equal?</tt> may fail if applied to circular data structures.

</p><p>
</p><hr>
<!--Navigation Panel-->
<a name="tex2html326" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node12.html">
<img width="37" height="24" align="BOTTOM" border="0" alt="next" src="./Equivalence predicates_files/next.png"></a> 
<a name="tex2html322" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/schemetutorial.html">
<img width="26" height="24" align="BOTTOM" border="0" alt="up" src="./Equivalence predicates_files/up.png"></a> 
<a name="tex2html316" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node10.html">
<img width="63" height="24" align="BOTTOM" border="0" alt="previous" src="./Equivalence predicates_files/prev.png"></a> 
<a name="tex2html324" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node1.html">
<img width="65" height="24" align="BOTTOM" border="0" alt="contents" src="./Equivalence predicates_files/contents.png"></a>  
<br>
<b> Next:</b> <a name="tex2html327" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node12.html">Input and output</a>
<b> Up:</b> <a name="tex2html323" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/schemetutorial.html">Scheme Tutorial</a>
<b> Previous:</b> <a name="tex2html317" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node10.html">Data types</a>
 &nbsp; <b>  <a name="tex2html325" href="http://www.cs.hut.fi/Studies/T-93.210/schemetutorial/node1.html">Contents</a></b> 
<!--End of Navigation Panel-->
<address>
Timo Lilja
2001-09-11
</address>


</body></html>